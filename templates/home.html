{% extends 'base.html' %}
{% load custom_filters %}

{% block title %}Home - Cloud Stream{% endblock %}

{% block content %}
    <!-- Custom Styles for Home Page interactions -->
    <style>
        .video-card {
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }
        
        .video-card:hover {
            /* Mint Green Glow Background with low opacity */
            background-color: rgba(0, 242, 234, 0.05) !important;
            /* Outer Glow */
            box-shadow: 0 0 25px rgba(0, 242, 234, 0.15);
            /* Border Highlight */
            border-color: rgba(0, 242, 234, 0.3);
            transform: translateY(-4px);
        }

        .video-card:hover .card-title {
            color: var(--primary); /* Optional: Highlights title on hover too */
        }
    </style>

    <!-- Section Header with proper spacing -->
    <div style="margin-bottom: 24px; display: flex; align-items: center; justify-content: space-between;">
        <h2 style="font-size: 20px; font-weight: 700; color: white; letter-spacing: 0.5px;">Recommended Videos</h2>
        <!-- Optional: Filter buttons could go here later -->
    </div>
    
    <div class="video-grid">
        {% for video in videos %}
        <div class="video-card">
            <!-- Thumbnail -->
            <a href="{% url 'watch_video' video.video_id %}" class="thumb">
                {% if video.thumbnail_key %}
                    <img src="https://vinayfinalvidscloudstream.s3.amazonaws.com/{{ video.thumbnail_key }}" alt="{{ video.title }}">
                {% else %}
                    <!-- Fallback Icon Centered -->
                    <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: #222; color: #555;">
                        <i class="fa-solid fa-play" style="font-size: 40px;"></i>
                    </div>
                {% endif %}
            </a>
            
            <!-- Details -->
            <div class="card-details">
                <!-- Avatar: Replaced Title Letter with Generic Icon -->
                <div style="min-width: 36px; height: 36px; background: #222; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; color: #555; margin-top: 4px;">
                    <i class="fa-solid fa-user"></i>
                </div>

                <div style="display: flex; flex-direction: column;">
                    <a href="{% url 'watch_video' video.video_id %}" class="card-title">
                        {{ video.title }}
                    </a>
                    <div class="card-meta">
                        <!-- We can add Creator Name here if available in the object -->
                        <span>Unknown Creator</span>
                        <span>â€¢</span>
                        <span>{{ video.created_at | time_ago }}</span>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
            <!-- Enhanced Empty State -->
            <div style="grid-column: 1 / -1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 60px; text-align: center; color: var(--text-muted);">
                <i class="fa-solid fa-film" style="font-size: 48px; margin-bottom: 20px; opacity: 0.5;"></i>
                <h3 style="color: white; margin-bottom: 10px;">No videos found</h3>
                <p>Be the first to upload amazing content to Cloud Stream!</p>
                <a href="{% url 'get_upload_url' %}" class="btn-primary" style="margin-top: 20px; display: inline-block; text-decoration: none;">
                    Upload Now
                </a>
            </div>
        {% endfor %}
    </div>
{% endblock %}